{"version":3,"file":"index.production.js","sources":["../../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../../../../node_modules/@babel/runtime/helpers/esm/extends.js","../../../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","../../../../node_modules/history/node_modules/@babel/runtime/helpers/esm/extends.js","../../../../node_modules/history/index.js","../../src/index.tsx"],"sourcesContent":["export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import _extends from'@babel/runtime/helpers/esm/extends';var r,B=r||(r={});B.Pop=\"POP\";B.Push=\"PUSH\";B.Replace=\"REPLACE\";var C=\"production\"!==process.env.NODE_ENV?function(b){return Object.freeze(b)}:function(b){return b};function D(b,h){if(!b){\"undefined\"!==typeof console&&console.warn(h);try{throw Error(h);}catch(k){}}}function E(b){b.preventDefault();b.returnValue=\"\"}\nfunction F(){var b=[];return{get length(){return b.length},push:function(h){b.push(h);return function(){b=b.filter(function(k){return k!==h})}},call:function(h){b.forEach(function(k){return k&&k(h)})}}}function H(){return Math.random().toString(36).substr(2,8)}function I(b){var h=b.pathname,k=b.search;b=b.hash;return(void 0===h?\"/\":h)+(void 0===k?\"\":k)+(void 0===b?\"\":b)}\nfunction J(b){var h={};if(b){var k=b.indexOf(\"#\");0<=k&&(h.hash=b.substr(k),b=b.substr(0,k));k=b.indexOf(\"?\");0<=k&&(h.search=b.substr(k),b=b.substr(0,k));b&&(h.pathname=b)}return h}\nfunction createBrowserHistory(b){function h(){var c=p.location,a=m.state||{};return[a.idx,C({pathname:c.pathname,search:c.search,hash:c.hash,state:a.usr||null,key:a.key||\"default\"})]}function k(c){return\"string\"===typeof c?c:I(c)}function x(c,a){void 0===a&&(a=null);return C(_extends({},q,\"string\"===typeof c?J(c):c,{state:a,key:H()}))}function z(c){t=c;c=h();v=c[0];q=c[1];d.call({action:t,location:q})}function A(c,a){function e(){A(c,a)}var l=r.Push,g=x(c,a);if(!f.length||(f.call({action:l,\nlocation:g,retry:e}),!1)){var n=[{usr:g.state,key:g.key,idx:v+1},k(g)];g=n[0];n=n[1];try{m.pushState(g,\"\",n)}catch(G){p.location.assign(n)}z(l)}}function y(c,a){function e(){y(c,a)}var l=r.Replace,g=x(c,a);f.length&&(f.call({action:l,location:g,retry:e}),1)||(g=[{usr:g.state,key:g.key,idx:v},k(g)],m.replaceState(g[0],\"\",g[1]),z(l))}function w(c){m.go(c)}void 0===b&&(b={});b=b.window;var p=void 0===b?document.defaultView:b,m=p.history,u=null;p.addEventListener(\"popstate\",function(){if(u)f.call(u),\nu=null;else{var c=r.Pop,a=h(),e=a[0];a=a[1];if(f.length)if(null!=e){var l=v-e;l&&(u={action:c,location:a,retry:function(){w(-1*l)}},w(l))}else\"production\"!==process.env.NODE_ENV?D(!1,\"You are trying to block a POP navigation to a location that was not created by the history library. The block will fail silently in production, but in general you should do all navigation with the history library (instead of using window.history.pushState directly) to avoid this situation.\"):void 0;else z(c)}});var t=\nr.Pop;b=h();var v=b[0],q=b[1],d=F(),f=F();null==v&&(v=0,m.replaceState(_extends({},m.state,{idx:v}),\"\"));return{get action(){return t},get location(){return q},createHref:k,push:A,replace:y,go:w,back:function(){w(-1)},forward:function(){w(1)},listen:function(c){return d.push(c)},block:function(c){var a=f.push(c);1===f.length&&p.addEventListener(\"beforeunload\",E);return function(){a();f.length||p.removeEventListener(\"beforeunload\",E)}}}};\nfunction createHashHistory(b){function h(){var a=J(m.location.hash.substr(1)),e=a.pathname,l=a.search;a=a.hash;var g=u.state||{};return[g.idx,C({pathname:void 0===e?\"/\":e,search:void 0===l?\"\":l,hash:void 0===a?\"\":a,state:g.usr||null,key:g.key||\"default\"})]}function k(){if(t)c.call(t),t=null;else{var a=r.Pop,e=h(),l=e[0];e=e[1];if(c.length)if(null!=l){var g=q-l;g&&(t={action:a,location:e,retry:function(){p(-1*g)}},p(g))}else\"production\"!==process.env.NODE_ENV?D(!1,\"You are trying to block a POP navigation to a location that was not created by the history library. The block will fail silently in production, but in general you should do all navigation with the history library (instead of using window.history.pushState directly) to avoid this situation.\"):\nvoid 0;else A(a)}}function x(a){var e=document.querySelector(\"base\"),l=\"\";e&&e.getAttribute(\"href\")&&(e=m.location.href,l=e.indexOf(\"#\"),l=-1===l?e:e.slice(0,l));return l+\"#\"+(\"string\"===typeof a?a:I(a))}function z(a,e){void 0===e&&(e=null);return C(_extends({},d,\"string\"===typeof a?J(a):a,{state:e,key:H()}))}function A(a){v=a;a=h();q=a[0];d=a[1];f.call({action:v,location:d})}function y(a,e){function l(){y(a,e)}var g=r.Push,n=z(a,e);\"production\"!==process.env.NODE_ENV?D(\"/\"===n.pathname.charAt(0),\n\"Relative pathnames are not supported in hash history.push(\"+JSON.stringify(a)+\")\"):void 0;if(!c.length||(c.call({action:g,location:n,retry:l}),!1)){var G=[{usr:n.state,key:n.key,idx:q+1},x(n)];n=G[0];G=G[1];try{u.pushState(n,\"\",G)}catch(K){m.location.assign(G)}A(g)}}function w(a,e){function l(){w(a,e)}var g=r.Replace,n=z(a,e);\"production\"!==process.env.NODE_ENV?D(\"/\"===n.pathname.charAt(0),\"Relative pathnames are not supported in hash history.replace(\"+JSON.stringify(a)+\")\"):void 0;c.length&&(c.call({action:g,\nlocation:n,retry:l}),1)||(n=[{usr:n.state,key:n.key,idx:q},x(n)],u.replaceState(n[0],\"\",n[1]),A(g))}function p(a){u.go(a)}void 0===b&&(b={});b=b.window;var m=void 0===b?document.defaultView:b,u=m.history,t=null;m.addEventListener(\"popstate\",k);m.addEventListener(\"hashchange\",function(){var a=h()[1];I(a)!==I(d)&&k()});var v=r.Pop;b=h();var q=b[0],d=b[1],f=F(),c=F();null==q&&(q=0,u.replaceState(_extends({},u.state,{idx:q}),\"\"));return{get action(){return v},get location(){return d},createHref:x,push:y,\nreplace:w,go:p,back:function(){p(-1)},forward:function(){p(1)},listen:function(a){return f.push(a)},block:function(a){var e=c.push(a);1===c.length&&m.addEventListener(\"beforeunload\",E);return function(){e();c.length||m.removeEventListener(\"beforeunload\",E)}}}};\nfunction createMemoryHistory(b){function h(d,f){void 0===f&&(f=null);return C(_extends({},t,\"string\"===typeof d?J(d):d,{state:f,key:H()}))}function k(d,f,c){return!q.length||(q.call({action:d,location:f,retry:c}),!1)}function x(d,f){u=d;t=f;v.call({action:u,location:t})}function z(d,f){var c=r.Push,a=h(d,f);\"production\"!==process.env.NODE_ENV?D(\"/\"===t.pathname.charAt(0),\"Relative pathnames are not supported in memory history.push(\"+JSON.stringify(d)+\")\"):void 0;k(c,a,function(){z(d,f)})&&\n(m+=1,p.splice(m,p.length,a),x(c,a))}function A(d,f){var c=r.Replace,a=h(d,f);\"production\"!==process.env.NODE_ENV?D(\"/\"===t.pathname.charAt(0),\"Relative pathnames are not supported in memory history.replace(\"+JSON.stringify(d)+\")\"):void 0;k(c,a,function(){A(d,f)})&&(p[m]=a,x(c,a))}function y(d){var f=Math.min(Math.max(m+d,0),p.length-1),c=r.Pop,a=p[f];k(c,a,function(){y(d)})&&(m=f,x(c,a))}void 0===b&&(b={});var w=b;b=w.initialEntries;w=w.initialIndex;var p=(void 0===b?[\"/\"]:b).map(function(d){var f=\nC(_extends({pathname:\"/\",search:\"\",hash:\"\",state:null,key:H()},\"string\"===typeof d?J(d):d));\"production\"!==process.env.NODE_ENV?D(\"/\"===f.pathname.charAt(0),\"Relative pathnames are not supported in createMemoryHistory({ initialEntries }) (invalid entry: \"+JSON.stringify(d)+\")\"):void 0;return f}),m=Math.min(Math.max(null==w?p.length-1:w,0),p.length-1),u=r.Pop,t=p[m],v=F(),q=F();return{get index(){return m},get action(){return u},get location(){return t},createHref:function(d){return\"string\"===typeof d?\nd:I(d)},push:z,replace:A,go:y,back:function(){y(-1)},forward:function(){y(1)},listen:function(d){return v.push(d)},block:function(d){return q.push(d)}}};export{r as Action,createBrowserHistory,createHashHistory,createMemoryHistory,I as createPath,J as parsePath}\n//# sourceMappingURL=index.js.map\n","import * as React from 'react'\n\nimport {\n  createHashHistory,\n  createBrowserHistory,\n  createMemoryHistory,\n  BrowserHistory,\n  MemoryHistory,\n  History,\n  HashHistory,\n} from 'history'\n\nexport { createHashHistory, createBrowserHistory, createMemoryHistory }\n\n// Types\n\ntype Timeout = ReturnType<typeof setTimeout>\n\ntype Maybe<T, TUnknown> = T extends {} ? T : TUnknown\n\nexport type DefaultGenerics = {\n  LoaderData: LoaderData<unknown>\n  Params: Params<string>\n  Search: Search<unknown>\n  RouteMeta: RouteMeta<unknown>\n}\n\nexport type PartialGenerics = Partial<DefaultGenerics>\n\nexport type MakeGenerics<TGenerics extends PartialGenerics> = TGenerics\n\nexport type Search<T> = Record<string, T>\nexport type Params<T> = Record<string, T>\nexport type LoaderData<T> = Record<string, T>\nexport type RouteMeta<T> = Record<string, T>\n\nexport type UseGeneric<\n  TGenerics extends PartialGenerics,\n  TGeneric extends keyof PartialGenerics,\n> = TGeneric extends 'LoaderData' | 'Search'\n  ? Partial<Maybe<TGenerics[TGeneric], DefaultGenerics[TGeneric]>>\n  : Maybe<TGenerics[TGeneric], DefaultGenerics[TGeneric]>\n\nexport type ReactLocationOptions = {\n  // The history object to be used internally by react-location\n  // A history will be created automatically if not provided.\n  history?: BrowserHistory | MemoryHistory | HashHistory\n  stringifySearch?: SearchSerializer\n  parseSearch?: SearchParser\n}\n\ntype SearchSerializer = (searchObj: Record<string, any>) => string\ntype SearchParser = (searchStr: string) => Record<string, any>\n\nexport type Updater<TResult> = TResult | ((prev?: TResult) => TResult)\n\nexport type Location<TGenerics extends PartialGenerics = DefaultGenerics> = {\n  href: string\n  pathname: string\n  search: UseGeneric<TGenerics, 'Search'>\n  searchStr: string\n  hash: string\n  key?: string\n  // nextAction?: 'push' | 'replace'\n}\n\nexport type Route<TGenerics extends PartialGenerics = DefaultGenerics> = {\n  // The path to match (relative to the nearest parent `Route` component or root basepath)\n  path?: string\n  // An ID to uniquely identify this route within its siblings. This is only required for routes that *only match on search* or if you have multiple routes with the same path\n  id?: string\n  // If true, this route will be matched as case-sensitive\n  caseSensitive?: boolean\n  // Either (1) an object that will be used to shallowly match the current location's search or (2) A function that receives the current search params and can return truthy if they are matched.\n  search?: SearchPredicate<UseGeneric<TGenerics, 'Search'>>\n  // The duration to wait during `loader` execution before showing the `pendingElement`\n  pendingMs?: number\n  // _If the `pendingElement` is shown_, the minimum duration for which it will be visible.\n  pendingMinMs?: number\n  // Search filters can be used to rewrite, persist, default and manipulate search params for link that\n  // point to their routes or child routes. See the \"basic\" example to see them in action.\n  searchFilters?: SearchFilter<TGenerics>[]\n  // An array of child routes\n  children?: Route<TGenerics>[]\n  // Route Loaders (see below) can be inline on the route, or resolved async\n} & RouteLoaders<TGenerics> & {\n    // If `import` is defined, this route can resolve its elements and loaders in a single asynchronous call\n    // This is particularly useful for code-splitting or module federation\n    import?: (opts: {\n      params: UseGeneric<TGenerics, 'Params'>\n      search: UseGeneric<TGenerics, 'Search'>\n    }) => Promise<RouteLoaders<TGenerics>>\n  }\n\nexport type RouteLoaders<TGenerics> = {\n  // The content to be rendered when the route is matched. If no element is provided, defaults to `<Outlet />`\n  element?: SyncOrAsyncElement<TGenerics>\n  // The content to be rendered when `loader` encounters an error\n  errorElement?: SyncOrAsyncElement<TGenerics>\n  // The content to be rendered when the duration of `loader` execution surpasses the `pendingMs` duration\n  pendingElement?: SyncOrAsyncElement<TGenerics>\n  // An asynchronous function responsible for preparing or fetching data for the route before it is rendered\n  loader?: LoaderFn<TGenerics>\n  // An asynchronous function responsible for cleaning up when the match cache is cleared. This is useful when\n  // the loader function has side effects that need to be cleaned up when the match is no longer in use.\n  unloader?: UnloaderFn<TGenerics>\n  // An integer of milliseconds representing how long data should be cached for the route\n  loaderMaxAge?: number\n  // Similar to React's useEffect hook, this function is called\n  // when moving from an inactive state to an active one. Likewise, when moving from\n  // an active to an inactive state, the return function (if provided) is called.\n  onMatch?: (\n    match: RouteMatch<TGenerics>,\n  ) => void | undefined | ((match: RouteMatch<TGenerics>) => void)\n  // This function is called when the route remains active from one transition to the next.\n  onTransition?: (match: RouteMatch<TGenerics>) => void\n  // An object of whatever you want! This object is accessible anywhere matches are.\n  meta?: UseGeneric<TGenerics, 'RouteMeta'>\n}\n\nexport type SearchFilter<TGenerics> = (\n  prev: UseGeneric<TGenerics, 'Search'>,\n  next: UseGeneric<TGenerics, 'Search'>,\n) => UseGeneric<TGenerics, 'Search'>\n\nexport type MatchLocation<TGenerics extends PartialGenerics = DefaultGenerics> =\n  {\n    to?: string | number | null\n    search?: SearchPredicate<UseGeneric<TGenerics, 'Search'>>\n    fuzzy?: boolean\n    caseSensitive?: boolean\n  }\n\nexport type SearchPredicate<TSearch> = (search: TSearch) => any\n\nexport type SyncOrAsyncElement<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = React.ReactNode | AsyncElement<TGenerics>\n\nexport type AsyncElement<TGenerics extends PartialGenerics = DefaultGenerics> =\n  (opts: {\n    params: UseGeneric<TGenerics, 'Params'>\n  }) => Promise<React.ReactNode>\n\nexport type UnloadedMatch<TGenerics extends PartialGenerics = DefaultGenerics> =\n  {\n    id: string\n    route: Route<TGenerics>\n    pathname: string\n    params: UseGeneric<TGenerics, 'Params'>\n    search: UseGeneric<TGenerics, 'Search'>\n  }\n\nexport type LoaderFn<TGenerics extends PartialGenerics = DefaultGenerics> = (\n  routeMatch: RouteMatch<TGenerics>,\n  opts: LoaderFnOptions<TGenerics>,\n) => PromiseLike<UseGeneric<TGenerics, 'LoaderData'>>\n\nexport type UnloaderFn<TGenerics extends PartialGenerics = DefaultGenerics> = (\n  routeMatch: RouteMatch<TGenerics>,\n) => void\n\nexport type LoaderFnOptions<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = {\n  parentMatch?: RouteMatch<TGenerics>\n  dispatch: (event: LoaderDispatchEvent<TGenerics>) => void\n}\n\ntype PromiseLike<T> = Promise<T> | T\n\nexport type ListenerFn = () => void\n\nexport type Segment = {\n  type: 'pathname' | 'param' | 'wildcard'\n  value: string\n}\n\nexport type RouterProps<TGenerics extends PartialGenerics = DefaultGenerics> = {\n  // Children will default to `<Outlet />` if not provided\n  children?: React.ReactNode\n  location: ReactLocation<TGenerics>\n} & RouterOptions<TGenerics>\n\nexport type RouterOptions<TGenerics> = {\n  // An array of route objects to match\n  routes: Route<TGenerics>[]\n  basepath?: string\n  filterRoutes?: FilterRoutesFn\n  defaultLinkPreloadMaxAge?: number\n  defaultLoaderMaxAge?: number\n  useErrorBoundary?: boolean\n  defaultElement?: SyncOrAsyncElement<TGenerics>\n  defaultErrorElement?: SyncOrAsyncElement<TGenerics>\n  defaultPendingElement?: SyncOrAsyncElement<TGenerics>\n  defaultPendingMs?: number\n  defaultPendingMinMs?: number\n  caseSensitive?: boolean\n  // An array of route match objects that have been both _matched_ and _loaded_. See the [SRR](#ssr) section for more details\n  // snapshot?: RouterSnapshot<TGenerics>\n}\n\nexport type RouterSnapshot<TGenerics> = {\n  // matches: Partial<RouteMatch<TGenerics>>[]\n  location: Location<TGenerics>\n  matches: SnapshotRouteMatch<TGenerics>[]\n}\n\nexport type SnapshotRouteMatch<TGenerics> = {\n  id: string\n  ownData: UseGeneric<TGenerics, 'LoaderData'>\n}\n\nexport type BuildNextOptions<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = {\n  to?: string | number | null\n  search?: true | Updater<UseGeneric<TGenerics, 'Search'>>\n  hash?: Updater<string>\n  from?: Partial<Location<TGenerics>>\n  key?: string\n  __searchFilters?: SearchFilter<TGenerics>[]\n}\n\nexport type NavigateOptions<TGenerics> = BuildNextOptions<TGenerics> & {\n  replace?: boolean\n  fromCurrent?: boolean\n}\n\nexport type PromptProps = {\n  message: string\n  when?: boolean | any\n  children?: React.ReactNode\n}\n\nexport type LinkProps<TGenerics extends PartialGenerics = DefaultGenerics> =\n  Omit<React.AnchorHTMLAttributes<HTMLAnchorElement>, 'href' | 'children'> & {\n    // The absolute or relative destination pathname\n    to?: string | number | null\n    // The new search object or a function to update it\n    search?: true | Updater<UseGeneric<TGenerics, 'Search'>>\n    // The new has string or a function to update it\n    hash?: Updater<string>\n    // Whether to replace the current history stack instead of pushing a new one\n    replace?: boolean\n    // A function that is passed the [Location API](#location-api) and returns additional props for the `active` state of this link. These props override other props passed to the link (`style`'s are merged, `className`'s are concatenated)\n    getActiveProps?: () => Record<string, any>\n    // A function that is passed the [Location API](#location-api) and returns additional props for the `inactive` state of this link. These props override other props passed to the link (`style`'s are merged, `className`'s are concatenated)\n    getInactiveProps?: () => Record<string, any>\n    // Defaults to `{ exact: false, includeHash: false }`\n    activeOptions?: ActiveOptions\n    // If set, will preload the linked route on hover and cache it for this many milliseconds in hopes that the user will eventually navigate there.\n    preload?: number\n    // If true, will render the link without the href attribute\n    disabled?: boolean\n    // A custom ref prop because of this: https://stackoverflow.com/questions/58469229/react-with-typescript-generics-while-using-react-forwardref/58473012\n    _ref?: React.Ref<HTMLAnchorElement>\n    // If a function is pass as a child, it will be given the `isActive` boolean to aid in further styling on the element it returns\n    children?:\n      | React.ReactNode\n      | ((state: { isActive: boolean }) => React.ReactNode)\n  }\n\ntype ActiveOptions = {\n  exact?: boolean\n  includeHash?: boolean\n}\n\nexport type LinkPropsType<TGenerics extends PartialGenerics = DefaultGenerics> =\n  LinkProps<TGenerics>\n\nexport type LoaderDispatchEvent<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> =\n  | {\n      type: 'maxAge'\n      maxAge: number\n    }\n  | {\n      type: 'loading'\n    }\n  | {\n      type: 'resolve'\n      data: UseGeneric<TGenerics, 'LoaderData'>\n    }\n  | {\n      type: 'reject'\n      error: unknown\n    }\n\nexport type LoadRouteFn<TGenerics> = (\n  next: Location<TGenerics>,\n) => MatchLoader<TGenerics>\n\nexport type TransitionState<TGenerics> = {\n  location: Location<TGenerics>\n  matches: RouteMatch<TGenerics>[]\n}\n\nexport type FilterRoutesFn = <\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(\n  routes: Route<TGenerics>[],\n) => Route<TGenerics>[]\n\nexport type RouterPropsType<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = RouterProps<TGenerics>\n\nexport type RouterType<TGenerics extends PartialGenerics = DefaultGenerics> = (\n  props: RouterProps<TGenerics>,\n) => JSX.Element\n\ntype Listener = () => void\n\n// Source\n\nconst LocationContext = React.createContext<{ location: ReactLocation<any> }>(\n  null!,\n)\nconst MatchesContext = React.createContext<RouteMatch<any>[]>(null!)\nconst routerContext = React.createContext<{ router: RouterInstance<any> }>(\n  null!,\n)\n\n// Detect if we're in the DOM\nconst isDOM = Boolean(\n  typeof window !== 'undefined' &&\n    window.document &&\n    window.document.createElement,\n)\n\nconst useLayoutEffect = isDOM ? React.useLayoutEffect : React.useEffect\n\n// This is the default history object if none is defined\nconst createDefaultHistory = () =>\n  isDOM ? createBrowserHistory() : createMemoryHistory()\n\nclass Subscribable {\n  listeners: Listener[]\n\n  constructor() {\n    this.listeners = []\n  }\n\n  subscribe(listener: Listener): () => void {\n    this.listeners.push(listener as Listener)\n\n    return () => {\n      this.listeners = this.listeners.filter((x) => x !== listener)\n    }\n  }\n\n  notify(): void {\n    this.listeners.forEach((listener) => listener())\n  }\n}\n\nexport class ReactLocation<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> extends Subscribable {\n  history: BrowserHistory | MemoryHistory\n  stringifySearch: SearchSerializer\n  parseSearch: SearchParser\n\n  current: Location<TGenerics>\n  destroy: () => void\n  navigateTimeout?: Timeout\n  nextAction?: 'push' | 'replace'\n\n  //\n\n  isTransitioning: boolean = false\n\n  constructor(options?: ReactLocationOptions) {\n    super()\n    this.history = options?.history || createDefaultHistory()\n    this.stringifySearch = options?.stringifySearch ?? defaultStringifySearch\n    this.parseSearch = options?.parseSearch ?? defaultParseSearch\n\n    this.current = this.parseLocation(this.history.location)\n\n    this.destroy = this.history.listen((event) => {\n      this.current = this.parseLocation(event.location, this.current)\n      this.notify()\n    })\n  }\n\n  buildNext(\n    basepath: string = '/',\n    dest: BuildNextOptions<TGenerics> = {},\n  ): Location<TGenerics> {\n    const from = {\n      ...this.current,\n      ...dest.from,\n    }\n\n    const pathname = resolvePath(basepath, from.pathname, `${dest.to ?? '.'}`)\n\n    const updatedSearch =\n      (dest.search === true\n        ? from.search\n        : functionalUpdate(dest.search, from.search)) ?? {}\n\n    const filteredSearch = dest.__searchFilters?.length\n      ? dest.__searchFilters.reduce(\n          (prev, next) => next(prev, updatedSearch),\n          from.search,\n        )\n      : updatedSearch\n\n    const search = replaceEqualDeep(from.search, filteredSearch)\n\n    const searchStr = this.stringifySearch(search)\n    let hash = functionalUpdate(dest.hash, from.hash)\n    hash = hash ? `#${hash}` : ''\n\n    return {\n      pathname,\n      search,\n      searchStr,\n      hash,\n      href: `${pathname}${searchStr}${hash}`,\n      key: dest.key,\n    }\n  }\n\n  navigate(next: Location<TGenerics>, replace?: boolean): void {\n    this.current = next\n\n    if (this.navigateTimeout) clearTimeout(this.navigateTimeout)\n\n    let nextAction: 'push' | 'replace' = 'replace'\n\n    if (!this.nextAction) {\n      nextAction = replace ? 'replace' : 'push'\n    }\n\n    if (!replace) {\n      nextAction = 'push'\n    }\n\n    this.nextAction = nextAction\n\n    this.navigateTimeout = setTimeout(() => {\n      let nextAction = this.nextAction\n      delete this.nextAction\n\n      const isSameUrl =\n        this.parseLocation(this.history.location).href === this.current.href\n\n      if (isSameUrl && !this.current.key) {\n        nextAction = 'replace'\n      }\n\n      if (nextAction === 'replace') {\n        return this.history.replace({\n          pathname: this.current.pathname,\n          hash: this.current.hash,\n          search: this.current.searchStr,\n        })\n      }\n\n      return this.history.push({\n        pathname: this.current.pathname,\n        hash: this.current.hash,\n        search: this.current.searchStr,\n      })\n    }, 16)\n  }\n\n  parseLocation(\n    location: History['location'],\n    previousLocation?: Location<TGenerics>,\n  ): Location<TGenerics> {\n    const parsedSearch = this.parseSearch(location.search)\n\n    return {\n      pathname: location.pathname,\n      searchStr: location.search,\n      search: replaceEqualDeep(previousLocation?.search, parsedSearch),\n      hash: location.hash.split('#').reverse()[0] ?? '',\n      href: `${location.pathname}${location.search}${location.hash}`,\n      key: location.key,\n    }\n  }\n}\n\nexport type MatchesProviderProps<TGenerics> = {\n  value: RouteMatch<TGenerics>[]\n  children: React.ReactNode\n}\n\nexport function MatchesProvider<TGenerics>(\n  props: MatchesProviderProps<TGenerics>,\n) {\n  return <MatchesContext.Provider {...props} />\n}\n\nexport function Router<TGenerics extends PartialGenerics = DefaultGenerics>({\n  children,\n  location,\n  // snapshot,\n  ...rest\n}: RouterProps<TGenerics>) {\n  const routerRef = React.useRef<RouterInstance<TGenerics>>(null!)\n  if (!routerRef.current) {\n    routerRef.current = new RouterInstance<TGenerics>({\n      location,\n      // snapshot,\n      routes: rest.routes,\n    })\n  }\n  const router = routerRef.current\n\n  const [nonce, rerender] = React.useReducer(() => ({}), {})\n\n  router.update(rest)\n\n  useLayoutEffect(() => {\n    return router.subscribe(() => {\n      rerender()\n    })\n  }, [])\n\n  useLayoutEffect(() => {\n    return router.updateLocation(location.current).unsubscribe\n  }, [location.current.key])\n\n  const routerValue = React.useMemo(\n    () => ({\n      router,\n    }),\n    [nonce],\n  )\n\n  return (\n    <LocationContext.Provider value={{ location }}>\n      <routerContext.Provider value={routerValue}>\n        <MatchesProvider value={[router.rootMatch!, ...router.state.matches]}>\n          {children ?? <Outlet />}\n        </MatchesProvider>\n      </routerContext.Provider>\n    </LocationContext.Provider>\n  )\n}\n\ntype RouterInstanceState<TGenerics> = {\n  state: TransitionState<TGenerics>\n  pending?: TransitionState<TGenerics>\n}\n\nexport class RouterInstance<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> extends Subscribable {\n  basepath?: string\n  rootMatch?: RouteMatch<TGenerics>\n  state: TransitionState<TGenerics>\n  pending?: TransitionState<TGenerics>\n  routes!: Route<TGenerics>[]\n  filterRoutes?: FilterRoutesFn\n  defaultLinkPreloadMaxAge?: number\n  defaultLoaderMaxAge?: number\n  useErrorBoundary?: boolean\n  defaultElement: SyncOrAsyncElement<TGenerics>\n  defaultErrorElement: SyncOrAsyncElement<TGenerics>\n  defaultPendingElement: SyncOrAsyncElement<TGenerics>\n  defaultPendingMs?: number\n  defaultPendingMinMs?: number\n  caseSensitive?: boolean\n\n  routesById: Record<string, Route<TGenerics>> = {}\n\n  constructor({\n    location,\n    // snapshot,\n    ...rest\n  }: {\n    location: ReactLocation<TGenerics>\n    // snapshot?: RouterSnapshot<TGenerics>\n  } & RouterOptions<TGenerics>) {\n    super()\n\n    this.update(rest)\n\n    // if (snapshot) {\n    //   const matchLoader = new MatchLoader(this, location.current)\n    //   matchLoader.matches.forEach((match, index) => {\n    //     if (match.id !== snapshot.matches[index]?.id) {\n    //       throw new Error(\n    //         `Router hydration mismatch: ${match.id} !== ${snapshot.matches[index]?.id}`,\n    //       )\n    //     }\n    //     match.ownData = snapshot.matches[index]?.ownData ?? {}\n    //   })\n    //   cascadeMatchData(matchLoader.matches)\n    // }\n\n    this.state = {\n      // location: snapshot?.location ?? location.current,\n      // matches: matchLoader.matches,\n      location: location.current,\n      matches: [],\n    }\n\n    location.subscribe(() => this.notify())\n  }\n\n  update = ({ basepath, routes, ...opts }: RouterOptions<TGenerics>) => {\n    Object.assign(this, opts)\n\n    this.basepath = cleanPath(`/${basepath ?? ''}`)\n\n    this.routesById = {}\n\n    const recurseRoutes = (\n      routes: Route<TGenerics>[],\n      parent?: Route<TGenerics>,\n    ): Route<TGenerics>[] => {\n      return routes.map((route) => {\n        const path = route.path ?? '*'\n\n        const id = joinPaths([\n          parent?.id === 'root' ? '' : parent?.id,\n          `${path?.replace(/(.)\\/$/, '$1')}${route.id ? `-${route.id}` : ''}`,\n        ])\n\n        route = {\n          ...route,\n          pendingMs: route.pendingMs ?? opts?.defaultPendingMs,\n          pendingMinMs: route.pendingMinMs ?? opts?.defaultPendingMinMs,\n          id,\n        }\n\n        if (this.routesById[id]) {\n          if (process.env.NODE_ENV !== 'production') {\n            console.warn(\n              `Duplicate routes found with id: ${id}`,\n              this.routesById,\n              route,\n            )\n          }\n          throw new Error()\n        }\n\n        this.routesById[id] = route\n\n        route.children = route.children?.length\n          ? recurseRoutes(route.children, route)\n          : undefined\n\n        return route\n      })\n    }\n\n    this.routes = recurseRoutes(routes)\n\n    this.rootMatch = {\n      id: 'root',\n      params: {} as any,\n      search: {} as any,\n      pathname: this.basepath,\n      route: null!,\n      ownData: {},\n      data: {},\n      isLoading: false,\n      status: 'resolved',\n    }\n  }\n\n  setState = (\n    updater: (\n      old: RouterInstanceState<TGenerics>,\n    ) => RouterInstanceState<TGenerics>,\n  ) => {\n    const newState = updater({ state: this.state, pending: this.pending })\n    this.state = newState.state\n    this.pending = newState.pending\n    this.cleanMatchCache()\n    this.notify()\n  }\n\n  matchCache: Record<string, RouteMatch<TGenerics>> = {}\n\n  cleanMatchCache = () => {\n    const activeMatchIds = [\n      ...(this?.state.matches ?? []),\n      ...(this?.pending?.matches ?? []),\n    ].map((d) => d.id)\n\n    Object.values(this.matchCache).forEach((match) => {\n      if (!match.updatedAt) {\n        return\n      }\n\n      if (activeMatchIds.includes(match.id)) {\n        return\n      }\n\n      const age = Date.now() - (match.updatedAt ?? 0)\n\n      if (!match.maxAge || age > match.maxAge) {\n        if (match.route.unloader) {\n          match.route.unloader(match)\n        }\n\n        delete this.matchCache[match.id]\n      }\n    })\n  }\n\n  updateLocation = (next: Location<TGenerics>) => {\n    let unsubscribe: () => void\n\n    const promise = new Promise<void>((resolve) => {\n      const matchLoader = new MatchLoader(this, next)\n\n      this.setState((old) => {\n        return {\n          ...old,\n          pending: {\n            location: matchLoader.location,\n            matches: matchLoader.matches,\n          },\n        }\n      })\n\n      unsubscribe = matchLoader.subscribe(() => {\n        const currentMatches = this.state.matches\n\n        currentMatches\n          .filter((d) => {\n            return !matchLoader.matches.find((dd) => dd.id === d.id)\n          })\n          .forEach((d) => {\n            d.onExit?.(d)\n          })\n\n        currentMatches\n          .filter((d) => {\n            return matchLoader.matches.find((dd) => dd.id === d.id)\n          })\n          .forEach((d) => {\n            d.route.onTransition?.(d)\n          })\n\n        matchLoader.matches\n          .filter((d) => {\n            return !currentMatches.find((dd) => dd.id === d.id)\n          })\n          .forEach((d) => {\n            d.onExit = d.route.onMatch?.(d)\n          })\n\n        this.setState((old) => {\n          return {\n            ...old,\n            state: {\n              location: matchLoader.location,\n              matches: matchLoader.matches,\n            },\n            pending: undefined,\n          }\n        })\n\n        resolve()\n      })\n\n      matchLoader.loadData()\n      matchLoader.startPending()\n    })\n\n    return {\n      promise,\n      unsubscribe: unsubscribe!,\n    }\n  }\n\n  // snapshot = (): RouterSnapshot<TGenerics> => {\n  //   return {\n  //     location: this.state.location,\n  //     matches: this.state.matches.map(({ ownData, id }) => {\n  //       return {\n  //         id,\n  //         ownData,\n  //       }\n  //     }),\n  //   }\n  // }\n}\n\nexport type UseLocationType<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = () => ReactLocation<TGenerics>\n\nexport function useLocation<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(): ReactLocation<TGenerics> {\n  // const getIsMounted = useGetIsMounted()\n  // const [, rerender] = React.useReducer((d) => d + 1, 0)\n  const context = React.useContext(LocationContext) as {\n    location: ReactLocation<TGenerics>\n  }\n  warning(!!context, 'useLocation must be used within a <ReactLocation />')\n\n  // useLayoutEffect(() => {\n  //   return instance.subscribe(() => {\n  //     // Rerender all subscribers in a microtask\n  //     Promise.resolve().then(() => {\n  //       // setTimeout(function renderAllLocationSubscribers() {\n  //       if (getIsMounted()) {\n  //         rerender()\n  //       }\n  //       // }, 0)\n  //     })\n  //   })\n  // }, [instance])\n\n  return context.location\n}\n\nexport class RouteMatch<TGenerics extends PartialGenerics = DefaultGenerics> {\n  id!: string\n  route!: Route<TGenerics>\n  pathname!: string\n  params!: UseGeneric<TGenerics, 'Params'>\n  search!: UseGeneric<TGenerics, 'Search'>\n  updatedAt?: number\n  element?: React.ReactNode\n  errorElement?: React.ReactNode\n  pendingElement?: React.ReactNode\n  error?: unknown\n  loaderPromise?: Promise<UseGeneric<TGenerics, 'LoaderData'>>\n  maxAge?: number\n  matchLoader?: MatchLoader<TGenerics>\n  pendingTimeout?: Timeout\n  pendingMinPromise?: Promise<void>\n  onExit?: void | ((match: RouteMatch<TGenerics>) => void)\n\n  constructor(unloadedMatch: UnloadedMatch<TGenerics>) {\n    Object.assign(this, unloadedMatch)\n  }\n\n  status: 'loading' | 'pending' | 'resolved' | 'rejected' = 'loading'\n  ownData: UseGeneric<TGenerics, 'LoaderData'> = {}\n  data: UseGeneric<TGenerics, 'LoaderData'> = {}\n  isLoading: boolean = false\n\n  private notify? = (isSoft?: boolean) => {\n    this.matchLoader?.preNotify(isSoft)\n  }\n\n  assignMatchLoader? = (matchLoader: MatchLoader<TGenerics>) => {\n    this.matchLoader = matchLoader\n  }\n\n  startPending? = () => {\n    if (this.pendingTimeout) {\n      clearTimeout(this.pendingTimeout)\n    }\n\n    if (this.route.pendingMs !== undefined) {\n      this.pendingTimeout = setTimeout(() => {\n        if (this.status === 'loading') {\n          this.status = 'pending'\n        }\n        this.notify?.()\n        if (typeof this.route.pendingMinMs !== 'undefined') {\n          this.pendingMinPromise = new Promise((r) =>\n            setTimeout(r, this.route.pendingMinMs),\n          )\n        }\n      }, this.route.pendingMs)\n    }\n  }\n\n  load? = (opts: {\n    maxAge?: number\n    parentMatch?: RouteMatch<TGenerics>\n    router: RouterInstance<TGenerics>\n  }) => {\n    this.maxAge =\n      opts.maxAge ?? this.route.loaderMaxAge ?? opts.router.defaultLoaderMaxAge\n\n    if (this.loaderPromise) {\n      return\n    }\n\n    const importer = this.route.import\n\n    // First, run any importers\n    this.loaderPromise = (\n      !importer\n        ? Promise.resolve()\n        : importer({ params: this.params, search: this.search }).then(\n            (imported) => {\n              this.route = {\n                ...this.route,\n                ...imported,\n              }\n            },\n          )\n    )\n      // then run all element and data loaders in parallel\n      .then(() => {\n        const elementPromises: Promise<void>[] = []\n\n        // For each element type, potentially load it asynchronously\n        const elementTypes = [\n          'element',\n          'errorElement',\n          'pendingElement',\n        ] as const\n\n        elementTypes.forEach((type) => {\n          const routeElement = this.route[type]\n\n          if (this[type]) {\n            return\n          }\n\n          if (typeof routeElement === 'function') {\n            elementPromises.push(\n              (routeElement as AsyncElement)(this).then((res) => {\n                this[type] = res\n              }),\n            )\n          } else {\n            this[type] = this.route[type]\n          }\n        })\n\n        const loader = this.route.loader\n\n        const dataPromise = !loader\n          ? Promise.resolve().then(() => {\n              this.status = 'resolved'\n            })\n          : new Promise(async (resolveLoader) => {\n              let pendingTimeout: Timeout\n\n              const resolve = (data: any) => {\n                this.status = 'resolved'\n                this.ownData = data\n                this.error = undefined\n              }\n\n              const reject = (err: any) => {\n                console.error(err)\n                this.status = 'rejected'\n                this.error = err\n              }\n\n              const finish = () => {\n                this.isLoading = false\n                this.startPending = undefined\n                clearTimeout(pendingTimeout)\n                resolveLoader(this.ownData)\n                this.notify?.(true)\n              }\n\n              try {\n                this.isLoading = true\n\n                resolve(\n                  await loader(this, {\n                    parentMatch: opts.parentMatch,\n                    dispatch: async (event) => {\n                      if (event.type === 'resolve') {\n                        resolve(event.data)\n                      } else if (event.type === 'reject') {\n                        reject(event.error)\n                      } else if (event.type === 'loading') {\n                        this.isLoading = true\n                      } else if (event.type === 'maxAge') {\n                        this.maxAge = event.maxAge\n                      }\n\n                      this.updatedAt = Date.now()\n                      this.notify?.(true)\n                    },\n                  }),\n                )\n                await this.pendingMinPromise\n                finish()\n              } catch (err) {\n                reject(err)\n                finish()\n              }\n            })\n\n        return Promise.all([...elementPromises, dataPromise]).then(() => {\n          this.updatedAt = Date.now()\n        })\n      })\n      .then(() => {\n        return this.ownData\n      })\n  }\n}\n\nclass MatchLoader<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> extends Subscribable {\n  router: RouterInstance<TGenerics>\n  location: Location<TGenerics>\n  matches: RouteMatch<TGenerics>[]\n  prepPromise?: Promise<void>\n  matchPromise?: Promise<UnloadedMatch<TGenerics>[]>\n  firstRenderPromises?: Promise<any>[]\n\n  constructor(\n    router: RouterInstance<TGenerics>,\n    nextLocation: Location<TGenerics>,\n  ) {\n    super()\n    this.router = router\n    this.location = nextLocation\n    this.matches = []\n\n    const unloadedMatches = matchRoutes(this.router, this.location)\n\n    this.matches = unloadedMatches?.map(\n      (unloadedMatch): RouteMatch<TGenerics> => {\n        if (!this.router.matchCache[unloadedMatch.id]) {\n          this.router.matchCache[unloadedMatch.id] = new RouteMatch(\n            unloadedMatch,\n          )\n        }\n\n        return this.router.matchCache[unloadedMatch.id]!\n      },\n    )\n  }\n\n  status: 'pending' | 'resolved' = 'pending'\n\n  preNotify = (isSoft?: boolean) => {\n    if (!isSoft) {\n      this.status = 'resolved'\n    }\n\n    cascadeMatchData(this.matches)\n    this.notify()\n  }\n\n  loadData = async ({ maxAge }: { maxAge?: number } = {}) => {\n    this.router.cleanMatchCache()\n\n    if (!this.matches?.length) {\n      this.preNotify()\n      return\n    }\n\n    this.firstRenderPromises = []\n\n    this.matches.forEach((match, index) => {\n      const parentMatch = this.matches?.[index - 1]\n      match.assignMatchLoader?.(this)\n      match.load?.({ maxAge, parentMatch, router: this.router })\n      this.firstRenderPromises?.push(match.loaderPromise!)\n    })\n\n    return await Promise.all(this.firstRenderPromises).then(() => {\n      this.preNotify()\n      return this.matches\n    })\n  }\n\n  load = async ({ maxAge }: { maxAge?: number } = {}) => {\n    return await this.loadData({ maxAge })\n  }\n\n  startPending = async () => {\n    this.matches.forEach((match) => match.startPending?.())\n  }\n}\n\nfunction cascadeMatchData<TGenerics>(matches?: RouteMatch<TGenerics>[]) {\n  matches?.forEach((match, index) => {\n    const parentMatch = matches?.[index - 1]\n\n    match.data = {\n      ...(parentMatch?.data ?? ({} as any)),\n      ...match.ownData,\n    }\n  })\n}\n\nexport type UseRouterType<TGenerics extends PartialGenerics = DefaultGenerics> =\n  () => RouterInstance<TGenerics>\n\nexport function useRouter<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(): RouterInstance<TGenerics> {\n  const value = React.useContext(routerContext)\n  if (!value) {\n    warning(true, 'You are trying to use useRouter() outside of ReactLocation!')\n    throw new Error()\n  }\n\n  return value.router as RouterInstance<TGenerics>\n}\n\nexport interface MatchRoutesOptions<TGenerics> {\n  filterRoutes?: FilterRoutesFn\n  defaultPendingMs?: number\n  defaultPendingMinMs?: number\n  defaultElement?: SyncOrAsyncElement<TGenerics>\n  defaultErrorElement?: SyncOrAsyncElement<TGenerics>\n  defaultPendingElement?: SyncOrAsyncElement<TGenerics>\n}\n\nexport type MatchRoutesType<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = (\n  router: RouterInstance<TGenerics>[],\n  currentLocation: Location<TGenerics>,\n) => Promise<UnloadedMatch<TGenerics>[]>\n\nexport function matchRoutes<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(\n  router: RouterInstance<TGenerics>,\n  currentLocation: Location<TGenerics>,\n): UnloadedMatch<TGenerics>[] {\n  if (!router.routes.length) {\n    return []\n  }\n\n  const matches: UnloadedMatch<TGenerics>[] = []\n\n  const recurse = async (\n    routes: Route<TGenerics>[],\n    parentMatch: UnloadedMatch<TGenerics>,\n  ): Promise<void> => {\n    let { pathname, params } = parentMatch\n    const filteredRoutes = router?.filterRoutes\n      ? router?.filterRoutes(routes)\n      : routes\n\n    const route = filteredRoutes.find((route) => {\n      const fullRoutePathName = joinPaths([pathname, route.path])\n\n      const fuzzy = !!(route.path !== '/' || route.children?.length)\n\n      const matchParams = matchRoute(currentLocation, {\n        to: fullRoutePathName,\n        search: route.search,\n        fuzzy,\n        caseSensitive: route.caseSensitive ?? router.caseSensitive,\n      })\n\n      if (matchParams) {\n        params = {\n          ...params,\n          ...matchParams,\n        }\n      }\n\n      return !!matchParams\n    })\n\n    if (!route) {\n      return\n    }\n\n    const interpolatedPath = interpolatePath(route.path, params)\n    pathname = joinPaths([pathname, interpolatedPath])\n\n    const interpolatedId = interpolatePath(route.id, params, true)\n\n    const match: UnloadedMatch<TGenerics> = {\n      id: interpolatedId,\n      route,\n      params,\n      pathname,\n      search: currentLocation.search,\n    }\n\n    matches.push(match)\n\n    if (route.children?.length) {\n      recurse(route.children, match)\n    }\n  }\n\n  recurse(router.routes, router.rootMatch!)\n\n  return matches\n}\n\nfunction interpolatePath(\n  path: string | undefined,\n  params: any,\n  leaveWildcard?: boolean,\n) {\n  const interpolatedPathSegments = parsePathname(path)\n\n  return joinPaths(\n    interpolatedPathSegments.map((segment) => {\n      if (segment.value === '*' && !leaveWildcard) {\n        return ''\n      }\n\n      if (segment.type === 'param') {\n        return params![segment.value.substring(1)] ?? ''\n      }\n\n      return segment.value\n    }),\n  )\n}\n\nexport type UseLoadRouteType<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = (routes?: Route<TGenerics>[]) => void\n\nexport function useLoadRoute<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>() {\n  const location = useLocation<TGenerics>()\n  const match = useMatch<TGenerics>()\n  const router = useRouter<TGenerics>()\n  const buildNext = useBuildNext<TGenerics>()\n\n  return useLatestCallback(\n    async (\n      navigate: NavigateOptions<TGenerics> = location.current,\n      opts?: { maxAge?: number },\n    ) => {\n      const next = buildNext({\n        ...navigate,\n        from: navigate.from ?? { pathname: match.pathname },\n      })\n\n      const matchLoader = new MatchLoader(router, next)\n\n      return await matchLoader.load(opts)\n    },\n  )\n}\n\nexport type UseMatchesType<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = () => RouteMatch<TGenerics>[]\n\nexport function useParentMatches<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(): RouteMatch<TGenerics>[] {\n  const router = useRouter<TGenerics>()\n  const match = useMatch()\n\n  const matches = router.state.matches\n\n  return matches.slice(0, matches.findIndex((d) => d.id === match.id) - 1)\n}\n\nexport function useMatches<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(): RouteMatch<TGenerics>[] {\n  return React.useContext(MatchesContext)\n}\n\nexport type UseMatchType<TGenerics extends PartialGenerics = DefaultGenerics> =\n  () => RouteMatch<TGenerics>\n\nexport function useMatch<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(): RouteMatch<TGenerics> {\n  return useMatches<TGenerics>()?.[0]!\n}\n\nexport type UseNavigateType<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = (options: NavigateOptions<TGenerics>) => void\n\nexport function useNavigate<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>() {\n  const location = useLocation<TGenerics>()\n  const match = useMatch<TGenerics>()\n  const buildNext = useBuildNext<TGenerics>()\n\n  function navigate({\n    search,\n    hash,\n    replace,\n    from,\n    to,\n    fromCurrent,\n  }: NavigateOptions<TGenerics> & {\n    replace?: boolean\n  }) {\n    fromCurrent = fromCurrent ?? typeof to === 'undefined'\n\n    const next = buildNext({\n      to,\n      search,\n      hash,\n      from: fromCurrent\n        ? location.current\n        : from ?? { pathname: match.pathname },\n    })\n\n    location.navigate(next, replace)\n  }\n\n  return useLatestCallback(navigate)\n}\n\nexport type NavigateType<TGenerics extends PartialGenerics = DefaultGenerics> =\n  (options: NavigateOptions<TGenerics>) => null\n\nexport function Navigate<TGenerics extends PartialGenerics = DefaultGenerics>(\n  options: NavigateOptions<TGenerics>,\n) {\n  let navigate = useNavigate<TGenerics>()\n\n  useLayoutEffect(() => {\n    navigate(options)\n  }, [navigate])\n\n  return null\n}\n\nfunction useBuildNext<TGenerics>() {\n  const location = useLocation<TGenerics>()\n  const router = useRouter<TGenerics>()\n\n  const buildNext = (opts: BuildNextOptions<TGenerics>) => {\n    const next = location.buildNext(router.basepath, opts)\n\n    const matches = matchRoutes<TGenerics>(router, next)\n\n    const __searchFilters = matches\n      .map((match) => match.route.searchFilters ?? [])\n      .flat()\n      .filter(Boolean)\n\n    return location.buildNext(router.basepath, { ...opts, __searchFilters })\n  }\n\n  return useLatestCallback(buildNext)\n}\n\nexport type LinkType<TGenerics extends PartialGenerics = DefaultGenerics> = (\n  props: LinkProps<TGenerics>,\n) => JSX.Element\n\nexport const Link = function Link<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>({\n  to = '.',\n  search,\n  hash,\n  children,\n  target,\n  style = {},\n  replace,\n  onClick,\n  onMouseEnter,\n  className = '',\n  getActiveProps = () => ({}),\n  getInactiveProps = () => ({}),\n  activeOptions,\n  preload,\n  disabled,\n  _ref,\n  ...rest\n}: LinkProps<TGenerics>) {\n  const loadRoute = useLoadRoute<TGenerics>()\n  const match = useMatch<TGenerics>()\n  const location = useLocation<TGenerics>()\n  const router = useRouter<TGenerics>()\n  const navigate = useNavigate<TGenerics>()\n  const buildNext = useBuildNext<TGenerics>()\n\n  preload = preload ?? router.defaultLinkPreloadMaxAge\n\n  // If this `to` is a valid external URL, log a warning\n  try {\n    const url = new URL(`${to}`)\n    warning(\n      false,\n      `<Link /> should not be used for external URLs like: ${url.href}`,\n    )\n  } catch (e) {}\n\n  const next = buildNext({\n    to,\n    search,\n    hash,\n    from: { pathname: match.pathname },\n  })\n\n  // The click handler\n  const handleClick = (e: React.MouseEvent<HTMLAnchorElement>) => {\n    if (onClick) onClick(e)\n\n    if (\n      !isCtrlEvent(e) &&\n      !e.defaultPrevented &&\n      (!target || target === '_self') &&\n      e.button === 0\n    ) {\n      e.preventDefault()\n      // All is well? Navigate!\n      navigate({\n        to,\n        search,\n        hash,\n        replace,\n        from: { pathname: match.pathname },\n      })\n    }\n  }\n\n  // The click handler\n  const handleMouseEnter = (e: React.MouseEvent<HTMLAnchorElement>) => {\n    if (onMouseEnter) onMouseEnter(e)\n\n    if (preload && preload > 0) {\n      loadRoute(\n        {\n          to,\n          search,\n          hash,\n        },\n        { maxAge: preload },\n      )\n    }\n  }\n\n  // Compare path/hash for matches\n  const pathIsEqual = location.current.pathname === next.pathname\n  const currentPathSplit = location.current.pathname.split('/')\n  const nextPathSplit = next.pathname.split('/')\n  const pathIsFuzzyEqual = nextPathSplit.every(\n    (d, i) => d === currentPathSplit[i],\n  )\n  const hashIsEqual = location.current.hash === next.hash\n\n  // Combine the matches based on user options\n  const pathTest = activeOptions?.exact ? pathIsEqual : pathIsFuzzyEqual\n  const hashTest = activeOptions?.includeHash ? hashIsEqual : true\n\n  // The final \"active\" test\n  const isActive = pathTest && hashTest\n\n  // Get the active props\n  const {\n    style: activeStyle = {},\n    className: activeClassName = '',\n    ...activeRest\n  } = isActive ? getActiveProps() : {}\n\n  // Get the inactive props\n  const {\n    style: inactiveStyle = {},\n    className: inactiveClassName = '',\n    ...inactiveRest\n  } = isActive ? {} : getInactiveProps()\n\n  return (\n    <a\n      {...{\n        ref: _ref,\n        href: disabled ? undefined : next.href,\n        onClick: handleClick,\n        onMouseEnter: handleMouseEnter,\n        target,\n        style: {\n          ...style,\n          ...activeStyle,\n          ...inactiveStyle,\n        },\n        className:\n          [className, activeClassName, inactiveClassName]\n            .filter(Boolean)\n            .join(' ') || undefined,\n        ...(disabled\n          ? {\n              role: 'link',\n              'aria-disabled': true,\n            }\n          : undefined),\n        ...rest,\n        ...activeRest,\n        ...inactiveRest,\n        children:\n          typeof children === 'function' ? children({ isActive }) : children,\n      }}\n    />\n  )\n}\n\nexport function Outlet<TGenerics extends PartialGenerics = DefaultGenerics>() {\n  const router = useRouter<TGenerics>()\n  const [_, ...matches] = useMatches<TGenerics>()\n\n  const match = matches[0]\n\n  if (!match) {\n    return null\n  }\n\n  const errorElement = match.errorElement ?? router.defaultErrorElement\n\n  const element = (() => {\n    if (match.status === 'rejected') {\n      if (errorElement) {\n        return errorElement\n      }\n\n      if (!router.useErrorBoundary) {\n        if (process.env.NODE_ENV !== 'production') {\n          const preStyle: React.HTMLAttributes<HTMLPreElement>['style'] = {\n            whiteSpace: 'normal',\n            display: 'inline-block',\n            background: 'rgba(0,0,0,.1)',\n            padding: '.1rem .2rem',\n            margin: '.1rem',\n            lineHeight: '1',\n            borderRadius: '.25rem',\n          }\n\n          return (\n            <div style={{ lineHeight: '1.7' }}>\n              <strong>\n                The following error occured in the loader for you route at:{' '}\n                <pre style={preStyle}>{match.pathname}</pre>\n              </strong>\n              .\n              <br />\n              <pre\n                style={{\n                  ...preStyle,\n                  display: 'block',\n                  padding: '.5rem',\n                  borderRadius: '.5rem',\n                }}\n              >\n                {(match.error as any).toString()}\n              </pre>\n              <br />\n              Your users won't see this message in production, but they will see{' '}\n              <strong>\"An unknown error occured!\"</strong>, which is at least\n              better than breaking your entire app.  For a better UX, please\n              specify an <pre style={preStyle}>errorElement</pre> for all of\n              your routes that contain asynchronous behavior, or at least\n              provide your own\n              <pre style={preStyle}>ErrorBoundary</pre> wrapper around your\n              renders to both the elements rendered by{' '}\n              <pre style={preStyle}>\n                {'useRoutes(routes, { useErrorBoundary: true })'}\n              </pre>{' '}\n              and <pre style={preStyle}>{'<Router useErrorBoundary />'}</pre>.{' '}\n              <br />\n              <br />\n            </div>\n          )\n        }\n        return 'An unknown error occured!'\n      }\n\n      throw match.error\n    }\n\n    const pendingElement = match.pendingElement ?? router.defaultPendingElement\n\n    if (match.status === 'loading') {\n      return null\n    }\n\n    if (match.status === 'pending') {\n      if (match.route.pendingMs || pendingElement) {\n        return pendingElement ?? null\n      }\n    }\n\n    const matchElement = match.element ?? router.defaultElement\n\n    return matchElement ?? <Outlet />\n  })()\n\n  return <MatchesProvider value={matches}>{element}</MatchesProvider>\n}\n\nexport function useResolvePath<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>() {\n  const router = useRouter<TGenerics>()\n  const match = useMatch<TGenerics>()\n\n  return useLatestCallback((path: string) =>\n    resolvePath(router.basepath!, match.pathname!, cleanPath(path)),\n  )\n}\n\nexport type UseSearchType<TGenerics extends PartialGenerics = DefaultGenerics> =\n  () => Partial<Maybe<TGenerics['Search'], Search<any>>>\n\nexport function useSearch<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>() {\n  const location = useLocation<TGenerics>()\n  return location.current.search\n}\n\nexport type MatchRouteType<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = (\n  currentLocation: Location<TGenerics>,\n  matchLocation: MatchLocation<TGenerics>,\n) => UseGeneric<TGenerics, 'Params'> | undefined\n\nexport function matchRoute<TGenerics extends PartialGenerics = DefaultGenerics>(\n  currentLocation: Location<TGenerics>,\n  matchLocation: MatchLocation<TGenerics>,\n): UseGeneric<TGenerics, 'Params'> | undefined {\n  const pathParams = matchByPath(currentLocation, matchLocation)\n  const searchMatched = matchBySearch(currentLocation, matchLocation)\n\n  if (matchLocation.to && !pathParams) {\n    return\n  }\n\n  if (matchLocation.search && !searchMatched) {\n    return\n  }\n\n  return (pathParams ?? {}) as UseGeneric<TGenerics, 'Params'>\n}\n\nexport type UseMatchRouteType<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = () => (\n  matchLocation: MatchLocation<TGenerics>,\n) => Maybe<TGenerics['Params'], Params<any>> | undefined\n\nexport type UseMatchRouteOptions<TGenerics> = MatchLocation<TGenerics> & {\n  pending?: boolean\n}\n\nexport function useMatchRoute<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(): (\n  matchLocation: UseMatchRouteOptions<TGenerics>,\n  opts?: { caseSensitive?: boolean },\n) => Maybe<TGenerics['Params'], Params<any>> | undefined {\n  const router = useRouter<TGenerics>()\n  const resolvePath = useResolvePath<TGenerics>()\n\n  return useLatestCallback(\n    ({\n      pending,\n      ...matchLocation\n    }: MatchLocation<TGenerics> & { pending?: boolean }) => {\n      matchLocation = {\n        ...matchLocation,\n        to: matchLocation.to ? resolvePath(`${matchLocation.to}`) : undefined,\n      }\n\n      if (pending) {\n        if (!router.pending?.location) {\n          return undefined\n        }\n        return matchRoute(router.pending.location, matchLocation)\n      }\n\n      return matchRoute(router.state.location, matchLocation)\n    },\n  )\n}\n\nexport function MatchRoute<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>({\n  children,\n  ...rest\n}: UseMatchRouteOptions<TGenerics> & {\n  children:\n    | React.ReactNode\n    | ((isNextLocation?: Params<TGenerics>) => React.ReactNode)\n}) {\n  const matchRoute = useMatchRoute<TGenerics>()\n  const match = matchRoute(rest)\n\n  if (typeof children === 'function') {\n    return children(match as any)\n  }\n\n  return match ? children : null\n}\n\nexport function usePrompt(message: string, when: boolean | any): void {\n  const location = useLocation()\n\n  React.useEffect(() => {\n    if (!when) return\n\n    let unblock = location.history.block((transition) => {\n      if (window.confirm(message)) {\n        unblock()\n        transition.retry()\n      } else {\n        location.current.pathname = window.location.pathname\n      }\n    })\n\n    return unblock\n  }, [when, location, message])\n}\n\nexport function Prompt({ message, when, children }: PromptProps) {\n  usePrompt(message, when ?? true)\n  return (children ?? null) as React.ReactNode\n}\n\nfunction warning(cond: boolean, message: string) {\n  if (!cond) {\n    if (typeof console !== 'undefined') console.warn(message)\n\n    try {\n      throw new Error(message)\n    } catch {}\n  }\n}\n\nfunction isFunction(d: any): d is Function {\n  return typeof d === 'function'\n}\n\nexport function functionalUpdate<TResult>(\n  updater?: Updater<TResult>,\n  previous?: TResult,\n) {\n  if (isFunction(updater)) {\n    return updater(previous as TResult)\n  }\n\n  return updater\n}\n\nfunction joinPaths(paths: (string | undefined)[]) {\n  return cleanPath(paths.filter(Boolean).join('/'))\n}\n\nexport function cleanPath(path: string) {\n  // remove double slashes\n  return `${path}`.replace(/\\/{2,}/g, '/')\n}\n\nexport function matchByPath<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(\n  currentLocation: Location<TGenerics>,\n  matchLocation: MatchLocation<TGenerics>,\n): UseGeneric<TGenerics, 'Params'> | undefined {\n  const baseSegments = parsePathname(currentLocation.pathname)\n  const routeSegments = parsePathname(`${matchLocation.to ?? '*'}`)\n\n  const params: Record<string, string> = {}\n\n  let isMatch = (() => {\n    for (\n      let i = 0;\n      i < Math.max(baseSegments.length, routeSegments.length);\n      i++\n    ) {\n      const baseSegment = baseSegments[i]\n      const routeSegment = routeSegments[i]\n\n      const isLastRouteSegment = i === routeSegments.length - 1\n      const isLastBaseSegment = i === baseSegments.length - 1\n\n      if (routeSegment) {\n        if (routeSegment.type === 'wildcard') {\n          if (baseSegment?.value) {\n            params['*'] = joinPaths(baseSegments.slice(i).map((d) => d.value))\n            return true\n          }\n          return false\n        }\n\n        if (routeSegment.type === 'pathname') {\n          if (routeSegment.value === '/' && !baseSegment?.value) {\n            return true\n          }\n\n          if (baseSegment) {\n            if (matchLocation.caseSensitive) {\n              if (routeSegment.value !== baseSegment.value) {\n                return false\n              }\n            } else if (\n              routeSegment.value.toLowerCase() !==\n              baseSegment.value.toLowerCase()\n            ) {\n              return false\n            }\n          }\n        }\n\n        if (!baseSegment) {\n          return false\n        }\n\n        if (routeSegment.type === 'param') {\n          params[routeSegment.value.substring(1)] = baseSegment.value\n        }\n      }\n\n      if (isLastRouteSegment && !isLastBaseSegment) {\n        return !!matchLocation.fuzzy\n      }\n    }\n    return true\n  })()\n\n  return isMatch ? (params as UseGeneric<TGenerics, 'Params'>) : undefined\n}\n\nfunction matchBySearch<TGenerics extends PartialGenerics = DefaultGenerics>(\n  currentLocation: Location<TGenerics>,\n  matchLocation: MatchLocation<TGenerics>,\n) {\n  return !!(\n    matchLocation.search && matchLocation.search(currentLocation.search)\n  )\n}\n\nexport function parsePathname(pathname?: string): Segment[] {\n  if (!pathname) {\n    return []\n  }\n\n  pathname = cleanPath(pathname)\n\n  const segments: Segment[] = []\n\n  if (pathname.slice(0, 1) === '/') {\n    pathname = pathname.substring(1)\n    segments.push({\n      type: 'pathname',\n      value: '/',\n    })\n  }\n\n  if (!pathname) {\n    return segments\n  }\n\n  // Remove empty segments and '.' segments\n  const split = pathname.split('/').filter(Boolean)\n\n  segments.push(\n    ...split.map((part): Segment => {\n      if (part.startsWith('*')) {\n        return {\n          type: 'wildcard',\n          value: part,\n        }\n      }\n\n      if (part.charAt(0) === ':') {\n        return {\n          type: 'param',\n          value: part,\n        }\n      }\n\n      return {\n        type: 'pathname',\n        value: part,\n      }\n    }),\n  )\n\n  if (pathname.slice(-1) === '/') {\n    pathname = pathname.substring(1)\n    segments.push({\n      type: 'pathname',\n      value: '/',\n    })\n  }\n\n  return segments\n}\n\nexport function resolvePath(basepath: string, base: string, to: string) {\n  base = base.replace(new RegExp(`^${basepath}`), '/')\n  to = to.replace(new RegExp(`^${basepath}`), '/')\n\n  let baseSegments = parsePathname(base)\n  const toSegments = parsePathname(to)\n\n  toSegments.forEach((toSegment, index) => {\n    if (toSegment.value === '/') {\n      if (!index) {\n        // Leading slash\n        baseSegments = [toSegment]\n      } else if (index === toSegments.length - 1) {\n        // Trailing Slash\n        baseSegments.push(toSegment)\n      } else {\n        // ignore inter-slashes\n      }\n    } else if (toSegment.value === '..') {\n      baseSegments.pop()\n    } else if (toSegment.value === '.') {\n      return\n    } else {\n      baseSegments.push(toSegment)\n    }\n  })\n\n  const joined = joinPaths([basepath, ...baseSegments.map((d) => d.value)])\n\n  return cleanPath(joined)\n}\n\nfunction isCtrlEvent(e: React.MouseEvent) {\n  return !!(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey)\n}\n\nfunction useLatestCallback<TCallback extends (...args: any[]) => any>(\n  cb: TCallback,\n) {\n  const stableFnRef =\n    React.useRef<(...args: Parameters<TCallback>) => ReturnType<TCallback>>()\n  const cbRef = React.useRef<TCallback>(cb)\n\n  cbRef.current = cb\n\n  if (!stableFnRef.current) {\n    stableFnRef.current = (...args) => cbRef.current(...args)\n  }\n\n  return stableFnRef.current\n}\n\nfunction useGetIsMounted() {\n  const ref = React.useRef(false)\n\n  React.useEffect(() => {\n    ref.current = true\n\n    return () => {\n      ref.current = false\n    }\n  })\n\n  return () => ref.current\n}\n\n/**\n * This function returns `a` if `b` is deeply equal.\n * If not, it will replace any deeply equal children of `b` with those of `a`.\n * This can be used for structural sharing between JSON values for example.\n */\nfunction replaceEqualDeep(prev: any, next: any) {\n  if (prev === next) {\n    return prev\n  }\n\n  const array = Array.isArray(prev) && Array.isArray(next)\n\n  if (array || (isPlainObject(prev) && isPlainObject(next))) {\n    const aSize = array ? prev.length : Object.keys(prev).length\n    const bItems = array ? next : Object.keys(next)\n    const bSize = bItems.length\n    const copy: any = array ? [] : {}\n\n    let equalItems = 0\n\n    for (let i = 0; i < bSize; i++) {\n      const key = array ? i : bItems[i]\n      copy[key] = replaceEqualDeep(prev[key], next[key])\n      if (copy[key] === prev[key]) {\n        equalItems++\n      }\n    }\n\n    return aSize === bSize && equalItems === aSize ? prev : copy\n  }\n\n  return next\n}\n\n// Copied from: https://github.com/jonschlinkert/is-plain-object\nfunction isPlainObject(o: any) {\n  if (!hasObjectPrototype(o)) {\n    return false\n  }\n\n  // If has modified constructor\n  const ctor = o.constructor\n  if (typeof ctor === 'undefined') {\n    return true\n  }\n\n  // If has modified prototype\n  const prot = ctor.prototype\n  if (!hasObjectPrototype(prot)) {\n    return false\n  }\n\n  // If constructor does not have an Object-specific method\n  if (!prot.hasOwnProperty('isPrototypeOf')) {\n    return false\n  }\n\n  // Most likely a plain Object\n  return true\n}\n\nfunction hasObjectPrototype(o: any) {\n  return Object.prototype.toString.call(o) === '[object Object]'\n}\n\nexport function defaultStringifySearch(search: Record<string, unknown>) {\n  search = { ...search }\n\n  if (search) {\n    Object.keys(search).forEach((key) => {\n      const val = search[key]\n      if (typeof val === 'undefined' || val === undefined) {\n        delete search[key]\n      } else if (val && typeof val === 'object' && val !== null) {\n        try {\n          search[key] = JSON.stringify(val)\n        } catch (err) {\n          // silent\n        }\n      }\n    })\n  }\n\n  const searchStr = new URLSearchParams(\n    search as Record<string, string>,\n  ).toString()\n\n  return searchStr ? `?${searchStr}` : ''\n}\n\nexport function defaultParseSearch(searchStr: string): Record<string, any> {\n  if (searchStr.substring(0, 1) === '?') {\n    searchStr = searchStr.substring(1)\n  }\n\n  let query: Record<string, unknown> = Object.fromEntries(\n    (new URLSearchParams(searchStr) as any).entries(),\n  )\n\n  // Try to parse query params\n  for (let key in query) {\n    const value = query[key]\n\n    try {\n      query[key] = JSON.parse(value as string)\n    } catch (err) {\n      //\n    }\n  }\n\n  return query\n}\n"],"names":["_assertThisInitialized","self","ReferenceError","_objectWithoutPropertiesLoose","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","_extends","assign","arguments","prototype","hasOwnProperty","call","apply","this","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","r","B","Pop","Push","Replace","E","b","preventDefault","returnValue","F","push","h","filter","k","forEach","H","Math","random","toString","substr","I","pathname","search","hash","J","createBrowserHistory","c","location","a","m","state","idx","usr","x","q","z","t","v","d","action","w","go","window","document","defaultView","history","u","addEventListener","f","e","l","retry","replaceState","createHref","A","g","n","pushState","G","replace","y","back","forward","listen","block","removeEventListener","createMemoryHistory","min","max","initialEntries","initialIndex","map","index","splice","_await","value","then","direct","Promise","resolve","args","reject","LocationContext","React","createContext","MatchesContext","routerContext","isDOM","Boolean","createElement","useLayoutEffect","useEffect","Subscribable","listeners","subscribe","listener","_this","notify","ReactLocation","options","isTransitioning","stringifySearch","defaultStringifySearch","parseSearch","defaultParseSearch","current","_this2","parseLocation","destroy","event","buildNext","basepath","dest","from","resolvePath","to","updatedSearch","functionalUpdate","filteredSearch","__searchFilters","reduce","prev","next","replaceEqualDeep","searchStr","href","navigate","navigateTimeout","clearTimeout","nextAction","setTimeout","_this3","previousLocation","parsedSearch","split","reverse","MatchesProvider","props","Provider","RouterInstance","rest","routesById","update","routes","opts","cleanPath","recurseRoutes","parent","route","path","id","joinPaths","pendingMs","defaultPendingMs","pendingMinMs","defaultPendingMinMs","_this4","Error","children","undefined","rootMatch","params","ownData","data","isLoading","status","setState","updater","newState","pending","cleanMatchCache","matchCache","activeMatchIds","_assertThisInitialize2","matches","_assertThisInitialize4","_assertThisInitialize5","values","match","updatedAt","includes","age","Date","now","maxAge","unloader","updateLocation","unsubscribe","promise","matchLoader","MatchLoader","old","currentMatches","find","dd","onExit","onTransition","onMatch","loadData","startPending","useLocation","context","useContext","warning","RouteMatch","unloadedMatch","isSoft","_this5","preNotify","assignMatchLoader","pendingTimeout","pendingMinPromise","load","loaderMaxAge","router","defaultLoaderMaxAge","loaderPromise","importer","imported","elementPromises","type","routeElement","res","loader","dataPromise","resolveLoader","error","err","console","finish","body","recover","result","parentMatch","dispatch","all","nextLocation","_this6","_this6$matches","firstRenderPromises","_this6$matches2","unloadedMatches","matchRoutes","useRouter","currentLocation","recurse","filterRoutes","fullRoutePathName","fuzzy","_route$children2","matchParams","matchRoute","caseSensitive","interpolatedPath","interpolatePath","_route$children3","leaveWildcard","parsePathname","segment","substring","useLoadRoute","useMatch","useBuildNext","useLatestCallback","useMatches","_useMatches","useNavigate","fromCurrent","searchFilters","flat","Outlet","errorElement","defaultErrorElement","element","useErrorBoundary","pendingElement","defaultPendingElement","matchElement","defaultElement","useResolvePath","matchLocation","pathParams","matchByPath","searchMatched","matchBySearch","useMatchRoute","_router$pending","usePrompt","message","when","unblock","transition","confirm","cond","warn","previous","paths","join","baseSegments","routeSegments","baseSegment","routeSegment","isLastRouteSegment","isLastBaseSegment","slice","toLowerCase","segments","part","startsWith","charAt","base","RegExp","toSegments","toSegment","pop","cb","stableFnRef","useRef","cbRef","array","Array","isArray","isPlainObject","aSize","bItems","bSize","copy","equalItems","hasObjectPrototype","ctor","prot","val","JSON","stringify","URLSearchParams","query","fromEntries","entries","parse","style","onClick","onMouseEnter","className","getActiveProps","getInactiveProps","activeOptions","preload","disabled","_ref","loadRoute","defaultLinkPreloadMaxAge","URL","pathIsEqual","currentPathSplit","pathIsFuzzyEqual","every","hashIsEqual","pathTest","exact","hashTest","includeHash","isActive","activeStyle","activeClassName","activeRest","inactiveStyle","inactiveClassName","inactiveRest","ref","metaKey","altKey","ctrlKey","shiftKey","isCtrlEvent","defaultPrevented","button","role","routerRef","useReducer","nonce","rerender","routerValue","useMemo","querySelector","getAttribute","K","findIndex"],"mappings":"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"}